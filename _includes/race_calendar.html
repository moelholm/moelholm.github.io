{% comment %}
Races Include Template
Usage: {% include race_calendar.html year="2025" %}
Parameters:
- year: The year to filter races (required)
This refactored template delegates logic/markup into partials for maintainability.
{% endcomment %}

{% assign calendar_year = include.year | default: "2025" %}

{% include races/compute_stats.html calendar_year=calendar_year %}

<div class="races-container">
  {% include races/filter_styles.html calendar_year=calendar_year %}

  <!-- radios must be siblings of .races-content -->
  <input class="rf-hidden rf-filter filter-all" type="radio" name="race-filter-{{ calendar_year }}" id="filter-all-{{ calendar_year }}" checked>
  <input class="rf-hidden rf-filter filter-ultra" type="radio" name="race-filter-{{ calendar_year }}" id="filter-ultra-{{ calendar_year }}">
  <input class="rf-hidden rf-filter filter-non-ultra" type="radio" name="race-filter-{{ calendar_year }}" id="filter-non-ultra-{{ calendar_year }}">
  <input class="rf-hidden rf-filter filter-trail" type="radio" name="race-filter-{{ calendar_year }}" id="filter-trail-{{ calendar_year }}">
  <input class="rf-hidden rf-filter filter-road" type="radio" name="race-filter-{{ calendar_year }}" id="filter-road-{{ calendar_year }}">
  <input class="rf-hidden rf-filter filter-backyard" type="radio" name="race-filter-{{ calendar_year }}" id="filter-backyard-{{ calendar_year }}">

  <div class="races-content">
    {% if race_count > 0 %}
      {% include races/stats.html calendar_year=calendar_year %}
    {% endif %}

    {% include races/table.html calendar_year=calendar_year %}

    <div class="races-footer text-center mt-4">
      <a href="/tags#race" class="view-all-races">View all races â†’</a>
    </div>
  </div>
</div>
