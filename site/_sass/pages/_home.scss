@import "../variables";

// Home hero and grid
.home-hero {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  margin-bottom: 1.25rem;
  align-items: start;
  .home-hero__img { width: 100%; border-radius: 10px; box-shadow: 0 2px 14px rgba(0,0,0,0.08); object-fit: cover; max-height: 340px; }
  .home-hero__text { h1 { margin: 0 0 0.25rem 0; } p { margin: 0 0 0.75rem 0; color: $text-muted; } }
  .home-hero__cta { margin-top: 0.25rem; }
  @media (min-width: $bp-desktop-min) { grid-template-columns: 5fr 4fr; .home-hero__img { max-height: 420px; } }
}

// Tablet adjustments
@media (min-width: $bp-ipad-min) and (max-width: $bp-ipad-max) {
  .home-hero { grid-template-columns: 6fr 5fr; gap: 0.75rem; }
  .home-hero .home-hero__img { max-height: 380px; }
  .home-hero .home-hero__text h1 { font-size: 2.25rem; line-height: 1.15; }
}

// Front-page badges layout on tablets
@media (min-width: $bp-ipad-min) and (max-width: $bp-ipad-max) {
  .home-hero .external-race-links { display: grid; grid-template-columns: repeat(2, max-content); gap: 0.5rem 0.6rem; align-items: center; }
  .home-hero .external-race-links .result-badge { margin: 0 !important; }
}

.home-grid { display: grid; grid-template-columns: 1fr; gap: 1rem; .home-post { margin-bottom: 0.5rem; } }

// Compact variants for homepage
.home-post--compact .card-body { padding: 0.6rem 0.75rem; }
// Keep compact title size but remove any bottom separators for home cards
.blog-item--compact { margin-bottom: 0.6rem; padding-bottom: 0.6rem; border-bottom: none; .home-post__title { font-size: 1.05rem; } }
// Ensure no separators underneath cards within the home grid
.home-samples .blog-item { border-bottom: none; margin-bottom: 0.6rem; padding-bottom: 0; }
.list-cards .blog-item--compact .card-body { padding-bottom: 0.6rem; }
.list-cards .blog-item--compact .toot-content:last-child,
.list-cards .blog-item--compact .toot-media-grid:last-child,
.list-cards .blog-item--compact .race-tag:last-child,
.list-cards .blog-item--compact .card-extra:last-child { margin-bottom: 0; }
.list-cards .blog-item--compact .card-extra { margin-top: 0.4rem; }
.list-cards .blog-item--compact .race-tag { margin-right: 0.35rem; margin-bottom: 0.35rem; }

// Grid of samples (posts, updates, results) shared layout used on home
.home-samples { display: grid; grid-template-columns: 1fr; gap: 0.6rem; align-items: stretch; > * { min-width: 0; width: 100%; } @media (min-width: $bp-desktop-min) { grid-template-columns: repeat(2, minmax(0, 1fr)); } &.home-samples--four { @media (min-width: $bp-desktop-min) { grid-template-columns: repeat(4, minmax(0, 1fr)); } } &.home-samples--two { @media (min-width: $bp-desktop-min) { grid-template-columns: repeat(2, minmax(0, 1fr)); } } }
.home-samples .card { height: 100%; width: 100%; }
.home-samples .home-post .card-body { display: flex; flex-direction: column; }
.home-samples .home-post .card-body .text-right:last-child { margin-top: auto; }
.home-samples .home-post .d-flex.align-items-baseline { align-items: center !important; }
.home-samples .home-post.position-relative .stretched-link { z-index: 1; }
.home-samples .home-post .home-post__title { position: relative; z-index: 2; }
.home-samples .home-post { cursor: pointer; }
.home-samples .home-post .card-text,
.home-samples .home-post .home-post__title { overflow-wrap: anywhere; word-break: break-word; }

// Keep race meta/tags from expanding card width
.home-sample-meta { display: flex; gap: 0.4rem; flex-wrap: wrap; align-items: center; }
.home-sample-meta .meta-item { white-space: nowrap; }
.home-sample-tags { display: block; }

// Home tag chips: no underline by default, underline on hover/focus for consistency
.home-sample-tags a,
.home-sample-tags .race-tag,
.home-sample-tags .tag { text-decoration: none; }
.home-sample-tags a:hover, .home-sample-tags a:focus,
.home-sample-tags .race-tag:hover, .home-sample-tags .race-tag:focus,
.home-sample-tags .tag:hover, .home-sample-tags .tag:focus {
  text-decoration: underline !important;
  text-underline-offset: 0.12em;
  text-decoration-thickness: 0.08em;
}

// Homepage Race metrics bar styling

// Race metrics: tight, table-like 2-row layout
.home-race-metrics {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-areas:
    "distance vert"
    "time time";
  gap: 0.3rem 0.35rem;
  margin: 0.4rem 0 0.5rem 0;
  align-items: stretch; // make row items equal height
}

.home-race-metrics .metric {
  display: inline-flex;
  align-items: center;
  justify-content: center; // center horizontally
  text-align: center; // center text within
  gap: 0.3rem;
  position: relative;
  background: #fff;
  // unified border style (same as distance)
  border: 1px dashed rgba(255, 106, 51, 0.22);
  border-radius: 8px;
  padding: 0.22rem 0.4rem; // ultra tight
  box-shadow: 0 1px 2px rgba(0,0,0,0.04);
  width: 100%;
  align-self: stretch;
  min-height: 2rem; // equalize heights, still compact
}

.home-race-metrics .metric-icon { display: inline-flex; align-items: center; justify-content: center; width: 1rem; }
.home-race-metrics .metric-icon i { font-size: 0.9rem; line-height: 1; opacity: 0.9; }
.home-race-metrics .metric .metric-value { font-weight: 700; color: $heading-secondary; white-space: nowrap; display: inline-flex; align-items: center; line-height: 1; }
.home-race-metrics .metric .metric-value .unit { font-weight: 600; color: $text-muted; margin-left: 0.12rem; }

// Emphasize different tiles slightly
.home-race-metrics .metric--distance {
  grid-area: distance;
  background: rgba(255, 106, 51, 0.03);
}
.home-race-metrics .metric--distance .metric-icon { color: $link-color; }
.home-race-metrics .metric--vert {
  grid-area: vert;
  background: rgba(16, 185, 129, 0.03);
}
.home-race-metrics .metric--vert .metric-icon { color: #16a34a; }
.home-race-metrics .metric--time {
  grid-area: time;
  background: rgba(59, 130, 246, 0.03);
}
.home-race-metrics .metric--time .metric-icon { color: #2563eb; }


// Always two columns on tablets/desktop with time spanning bottom row
@media (min-width: $bp-ipad-min) {
  .home-race-metrics {
    grid-template-columns: 1fr 1fr;
    grid-template-areas:
      "distance vert"
      "time time";
    gap: 0.35rem 0.4rem;
  }
}

// Phones: stack if space is tight
@media (max-width: $bp-compact) {
  .home-race-metrics {
    grid-template-columns: 1fr 1fr;
    grid-template-areas:
      "distance vert"
      "time time";
    gap: 0.25rem 0.3rem;
  }
}


@media (max-width: $bp-compact) { .home-race-metrics { grid-template-columns: 1fr 1fr; } }

// Tablets: two columns
@media (min-width: $bp-ipad-min) and (max-width: $bp-ipad-max) {
  .home-race-metrics { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

// Ensure equal-height cards by stretching grid children and letting the card fill height
.home-samples > * { height: 100%; align-self: stretch; width: 100%; }
.home-samples > * > .blog-item { height: 100%; width: 100%; display: flex; }
.home-samples > * > .blog-item > .card { height: 100%; display: flex; flex-direction: column; }
.home-samples > * > .blog-item > .card > .card-body { display: flex; flex-direction: column; }

// Home post title color behavior
.home-post__title {
  color: $link-color !important;
  &:hover,
  &:focus { color: $link-hover-color !important; }
}

// Homepage intro spacing and list bullets
.blog-item.intro { margin-bottom: 0.9em; padding-bottom: 0.9em; }
.blog-item.intro ul {
  list-style: none;
  padding-left: 0;
  margin: 1em 0;
  li {
    position: relative;
    padding-left: 1.8em;
    margin-bottom: 0.8em;
    transition: all 0.3s ease;
    &::before { content: ">"; position: absolute; left: 0; color: $trail-green; font-size: 0.9em; transition: all 0.3s ease; }
    &:hover { padding-left: 2em; color: $heading-secondary; &::before { transform: translateX(3px); } }
    @media (max-width: 767px) {
      padding-left: 1.5em; margin-bottom: 0.6em;
      &:hover { padding-left: 1.7em; &::before { transform: translateX(2px); } }
    }
  }
}

// Front list spacing helpers
.front-list .blog-item { margin-bottom: 1em; padding-bottom: 1em; border-bottom: 1px solid rgba(252, 76, 2, 0.1); }
.front-list .blog-item:last-child { margin-bottom: 0; padding-bottom: 0; border-bottom: none; }
.front-list .row > .col-md-12 { margin-bottom: 0.8rem; }
.front-list .row > .col-md-12:last-child { margin-bottom: 0; }

// Small helpers used on home
.emoji-badge { font-size: 0.95rem; line-height: 1; }
.home-card-sep { margin: 0.08rem 0 0.12rem 0; border: 0; border-top: 1px solid rgba(252, 76, 2, 0.08); }
.home-sample-tags { margin-top: 0.25rem; }
.home-sample-tags .race-tags-inline { display: inline-flex; gap: 0.25rem; flex-wrap: wrap; }

// RSS link styles (used on home header)
.rss-link-block { text-align: right; }
.rss-link, .rss-link-inline { color: $link-color; text-decoration: none; }
.rss-link:hover, .rss-link-inline:hover { color: $link-hover-color; text-decoration: none; }
.rss-link--float { float: right; margin: 0.15rem 0 0.35rem 0.6rem; line-height: 1; }
@media (max-width: $bp-compact) { .rss-link--float { float: none; display: inline-block; margin-left: 0.25rem; } }
