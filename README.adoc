= www.moelholm.com

Web site for www.moelholm.com.

== Run locally

After checkout (from repo root):

    cd site && bundle install && cd -

=== Development vs Production Servers ðŸ”§

The site provides two convenient server scripts for different workflows:

==== Development Server (Draft Mode)
    ./dev-server.sh

==== Production Server (Live Mode)
    ./prod-server.sh

**Features:**
* **Hides unpublished posts** (production behavior)
* Enables LiveReload for automatic browser refresh
* Simulates exactly what GitHub Pages will show
* **Perfect for:** Final testing before publishing

=== Manual Jekyll Commands

For advanced usage (run inside the `site/` folder):

    # Development with drafts
    bundle exec jekyll serve --config _config.yml,_config_dev.yml
    
    # Production mode
    bundle exec jekyll serve --config _config.yml
    
    # Basic serve (production)
    bundle exec jekyll serve

=== Maintenance

Once in a while:

    (cd site && bundle update)

== Photo Processing ðŸ“¸

=== Automatic HEIC to JPG Conversion

Use the provided Python script to convert iPhone photos (HEIC format) to blog-ready JPGs:

    python3 tools/convert_heic_photos.py <input_directory> [output_base_directory]

**Examples:**

    # Convert photos in _temp_photos directory (will auto-detect date from EXIF)
    python3 tools/convert_heic_photos.py _temp_photos
    
    # Convert to custom output directory
    python3 tools/convert_heic_photos.py _temp_photos img_running
    
    # Convert photos from any directory
    python3 tools/convert_heic_photos.py ~/Desktop/race_photos

**The script will:**

* Extract the date from EXIF data automatically
* Create directories like `img_running/2025-08-16/`
* Resize photos to exactly 600x600 pixels (square format)
* Convert to high-quality JPG format
* Organize photos by date taken

**Dependencies are automatically installed** when the codespace starts.

=== Manual Image Conversion (Legacy)

For reference, the old manual method:

    convert 2025-01-11_10.heic -resize 600x600 -quality 100 2025-01-11/2025-01-11_10_small.jpg

== About

=== Jekyll & GitHub Pages

This site uses Jekyll 3.10.0 with GitHub Pages. The build process is fully automated:

* **Local Development:** Use `./dev-server.sh` to preview with drafts
* **Production Testing:** Use `./prod-server.sh` to test final output  
* **GitHub Pages:** Builds via Actions from `site/` on push to master
* **Collections:** Running and software engineering posts are organized as Jekyll collections
* **Automated Collections:**
** Activities (Strava) fetched via `tools/fetch_strava_activities.py` (latest activities, description + media thumbnails)
** Updates (Mastodon toots) fetched via `tools/fetch_toots.py` (tag-filtered statuses with media)
Both are stored under `blog_collections/_activities` and `blog_collections/_toots` respectively and surfaced on the front page (Activities shown before Updates) using a shared section include.
* **Draft Management:** Uses Jekyll's built-in `published: false` support

=== Photos

For the running blogs; 600x600 jpg square format. Converted and downscaled automatically with the Python script in `tools/convert_heic_photos.py`.

The script automatically:
* Extracts date from EXIF data
* Creates date-based directories (YYYY-MM-DD format)
* Resizes to exactly 600x600 pixels (square format)
* Maintains high quality (95% JPEG quality)

**Legacy method:** Manual conversion with imagemagick (see Photo Processing section above).

=== Markdown

==== Syntax highlighting

    Download syntax highlight CSS from: link:https://github.com/richleland/pygments-css[pygments-css]

== Reference

link:http://jmcglone.com/guides/github-pages/[Creating and Hosting a Personal Site on GitHub]
This is the awesome guide I used for starting this site.